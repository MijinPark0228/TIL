# 응답 3초의 시스템을 만드는 법

#### 성능 문제는 설계부터 모든 공정에서 존재함으로 프로젝트 전체에서 성능을 케어 해야한다.

## PART1. 왜! 프로젝트 전체에서 성능 케어 해야하는 가?

 A사에서 기업채용 광고 발신 시스템을 개발하였다. 이 서비스는 광고 이미지가 다수의 디자이너에게 자유롭게 투고 받아서 클릭율이 높은 광고 발신빈도를 높이는 새로운 형식의 시스템이다. 이러한 광고 발신의 응답시간을 1초 안에 하는 것으로 정하였다. 하지만 서비스 개시 2주만에 즉시 성능 문제가 발생하였는데, 광고 발신 이력을 DB에 Insert할 때와 집계를 할 때 테이블 락을 걸게 되면서 서비스 사용율이 높아짐에 따라 지연이 발생한 것이다. 이 경우 테이블 락의 범위를 좁게하거나 하는 대책이 세웠다.

하지만, 근본적 원인은 요건에 있었다. 긴급 대책으로 큰 지연은 없어졌지만, 서비스 이용율이 높을 때 1초를 넘기는 경우가 발생하였기 때문에 근본대책이 필요했다. 그렇게 찾은 근본 원인은 요건정의에 있었다. 

요건정의 (서비스 규모로 하드웨어를 결정 - 성능 중시)

↓

중간 공정 (기능요건의 실현에 더해지는 성능을 경시)

↓

테스트 (성능요건을 만족하는가를 확인 - 성능 중시)

↓

가동 -> 트러블 발생!!



발신 이력이 갱신이 되면 통계데이터도 갱신이 되도록 설계가 되어 있었는데, 통계 데이터에서 그렇게 실시간 갱신은 불필요하다고 판단, 담당자에게 제안을 하여 1분에 1번 갱신, 일정 값 이상의 경우 갱신 하도록 변경하였다.

이러한 문제가 설계단계에서 판단 되었다면 성능 트러블이 발생하지 않았을 것이다.

성능 문제를 중시하면서도 결과로써는 경시하는 경향이 있다. 또 이렇게 모든 공정에서 성능을 중요하게 생각하지 않아 성능 트러블이 발생했을때는 이미 늦었다.

요구 되는 것은 프로젝트 전체 공정에서의 성능 관리이다.

시스템개발에서는 아까의 사례와 같은 요건정의에서 방지할 수도 있다. 성능 관리의 기본적인 생각은 높은 퍼포먼스도 트러블 슈팅도 아니다. 성능 요건을 만족하지 못하게 하는 요인을 방지 하는 것이다.

그러기 위해서는 성능과 관련된 과제를 개발 전체 공정에서 인식해 두는 것이 좋다.